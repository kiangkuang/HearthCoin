<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>HearthCoin</title>
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
  <style>
    .glow {
      box-shadow: lime 0px 0px 40px 15px;
    }
  </style>
  <script>
    var isMobile = window.matchMedia("only screen and (max-width: 760px)");
    if (isMobile.matches) {
        alert("Doesn't work on mobile.\nPlay on a computer you filthy casual.");
    }
  </script>
</head>
<body style="margin: 0px;">
<div id="board" style="background: url('board.jpg'); background-size: contain; background-position: top center; background-repeat: no-repeat; height: 720px; width: 1280px;">
  <div class="card glow" style="position: absolute; left: 550px; top: 470px; height: 230px; width: 155px;">
    <img src="coin.png" style="height: 250px;left: -19px;top: -16px;position: absolute;">
  </div>
  <img src="dmg.png" class="dmg" style="display: none;left: 585px; position: absolute;">
  <img src="victory.png" class="win" style="display: none;height: 500px;left: 350px;top: 120px;position: absolute;">
  <img src="defeat.png" class="lose" style="display: none;height: 500px;left: 325px;top: 120px;position: absolute;">
</div>
<script>
  $(".card").draggable({
    containment: "parent",
    stop: function() {
      if ($(".card").position().top < 350){
        $(".card").removeClass("glow").fadeOut();
        $(".card img").animate({
          height: 300,
          left: $(".card img").position().left - 20,
          top: $(".card img").position().top - 20
        }, function(){
          if (Math.random() > 0.5) {
            $(".dmg").css({ top: '72px' }).fadeIn().delay(400).fadeOut(400, function(){
              $(".win").fadeIn();
            });
          } else {
            $(".dmg").css({ top: '485px' }).fadeIn().delay(400).fadeOut(400, function(){
              $(".lose").fadeIn();
            });
          }
        });
      } else {
        $(".card").animate({
          left: 550,
          top: 470
        });    
      }
    }
  });
  $(".win, .lose").click(function(e){
    // reset
    $(e.target).fadeOut(400, function(){
      $(".card img").css({
        height: 250,
        left: -19,
        top: -16
      });
      $(".card").addClass("glow").css({left:550, top: 470 }).fadeIn();
    });
  });
  </script>
</body>
</html>